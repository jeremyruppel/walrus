/**
 * Walrus.js 0.4.0
 * (c) 2012 Jeremy Ruppel
 * Walrus.js is freely distributable under the terms of the MIT license.
 * https://raw.github.com/jeremyruppel/walrus/master/LICENSE
 */
((function(){var a,b,c,d,e;e=typeof require!="undefined"&&require!==null&&typeof exports!="undefined"&&exports!==null?require("./walrus"):window.Walrus,c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],d=["January","February","March","April","May","June","July","August","September","October","November","December"],b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e.addFilter("strftime",function(e,f){var g,h,i=this;return g=new Date(e),h=function(a,b,c){return b==null&&(b=2),c==null&&(c="0"),(""+a).length<b?h(""+c+a,b,c):a},f.replace(/%(.)/g,function(e){switch(e){case"%a":return a[g.getDay()];case"%A":return c[g.getDay()];case"%b":return b[g.getMonth()];case"%B":return d[g.getMonth()];case"%D":return i.strftime(g,"%m/%d/%y");case"%d":return h(g.getDate());case"%e":return g.getDate();case"%F":return i.strftime(g,"%Y-%m-%d");case"%H":return h(g.getHours());case"%I":return g.getHours()>12?h(g.getHours()-12):h(g.getHours());case"%k":return g.getHours();case"%l":return g.getHours()>12?g.getHours()-12:g.getHours();case"%M":return g.getMinutes();case"%m":return h(g.getMonth()+1);case"%n":return"\n";case"%p":return g.getHours()>12?"PM":"AM";case"%R":return i.strftime(g,"%H:%M");case"%r":return i.strftime(g,"%I:%M:%S %p");case"%S":return h(g.getSeconds());case"%T":return i.strftime(g,"%H:%M:%S");case"%t":return"\t";case"%u":return g.getDay()||7;case"%v":return i.strftime(g,"%e-%b-%Y");case"%w":return g.getDay();case"%X":return g.toTimeString();case"%x":return g.toDateString();case"%Y":return g.getFullYear();case"%y":return g.getFullYear().toString().slice(-2);case"%Z":return g.toString().match(/\((\w+)\)/)[1]||""}})}),e.Utils.isLeapYear=function(a){return(new Date(a,1,29)).getDate()===29},e.addFilter("time_ago_in_words",function(a,b){var c,d,f,g,h,i,j,k,l,m,n,o,p;h=new Date(a),o=new Date,c=(o-h)/1e3,d=Math.round(Math.abs(c)/60),f=Math.round(Math.abs(c));switch(!1){case!(0<=d&&d<=1):if(!b)return d===0?"less than a minute":"1 minute";switch(!1){case!(0<=f&&f<=4):return"less than 5 seconds";case!(5<=f&&f<=9):return"less than 10 seconds";case!(10<=f&&f<=19):return"less than 20 seconds";case!(20<=f&&f<=39):return"half a minute";case!(40<=f&&f<=59):return"less than a minute";default:return"1 minute"}break;case!(2<=d&&d<=44):return""+d+" minutes";case!(45<=d&&d<=89):return"about 1 hour";case!(90<=d&&d<=1439):return"about "+Math.round(d/60)+" hours";case!(1440<=d&&d<=2519):return"1 day";case!(2520<=d&&d<=43199):return""+Math.round(d/1440)+" days";case!(43200<=d&&d<=86399):return"about 1 month";case!(86400<=d&&d<=525599):return""+Math.round(d/43200)+" months";default:return i=h.getFullYear(),h.getMonth()>=2&&(i+=1),p=o.getFullYear(),o.getMonth()<2&&(p-=1),k=function(a,b){var c,d;c=0;for(d=a;a<=b?d<=b:d>=b;a<=b?d++:d--)e.Utils.isLeapYear(d)&&c++;return c},j=i>p?0:k(i,p),l=j*1440,m=d-l,n=m%525600,g=Math.floor(m/525600),n<131400?"about "+g+" "+(g===1?"year":"years"):n<394200?"over "+g+" "+(g===1?"year":"years"):(console.log("****",n),"almost "+(g+1)+" years")}})})).call(this)